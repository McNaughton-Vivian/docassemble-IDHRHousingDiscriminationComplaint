metadata:
  title: Housing discrimination complaint
  short title: Housing discrimination complaint
  comment: This program helps you make a housing discrimination complaint to file with the Illinois Department of Human Rights (IDHR).
  authors:
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - subject_property: ALAddress
  - users: ALPeopleList.using(there_are_any=True)
  - alt_contacts: ALPeopleList.using(there_are_any=True)
  - other_parties: ALPeopleList.using(there_are_any=True)
  - knows_alt_address: DAList
---
code: |
  al_form_type = 'new_case'
  user_ask_role = 'plaintiff'
  ilao_easy_form_title = "Housing discrimination complaint"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/housing-discrimination-complaint-idhr"
  form_name = "Housing discrimination complaint"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-IDHRHousingDiscriminationComplaint'
---
# Road map
sections:
  - section_intro: Start
  - section_property_details: Property details
  - section_discrimination_info: Discrimination info
  - section_about_you: About you and other contacts
  - section_idhr_form: IDHR form info
  - section_download: Download  
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  program_instructions
  set_progress(5)
  accept_terms
  whats_next
  nav.set_section('section_property_details')
  set_progress(10)
  if subject_property.state != "IL":
    not_illinois_property  
  kind_apartment
  if kind_apartment:
    number_units
  owner_occupied
  property_still_available
  nav.set_section('section_discrimination_info')
  set_progress(20)
  basis_list
  discrim_housing_opp
  set_progress(35)
  discrim_description
  discrim_date
  # if discrim date > 365 days ago, sorry screen
  if (today() - discrim_date).days > 365:
    not_in_time
  if (today() - discrim_date).days > 351:
    file_soon_warning
  discrim_basis
  set_progress(50)
  other_parties.gather(number=1)
  other_party_landlord
  other_parties[0].address.address
  other_parties[0].phone_number
  nav.set_section('section_about_you')
  set_progress(60)
  users.gather(number=1)
  users[0].address.address
  users[0].phone_number
  users[0].email
  set_progress(70)
  if has_alt_contact:
    alt_contacts[0].name.first
    alt_contacts[0].phone_number
    if knows_alt_address[0]:
      alt_contacts[0].address.address
    if has_second_alt_contact:
      alt_contacts[1].name.first
      alt_contacts[1].phone_number
      if knows_alt_address[1]:
        alt_contacts[1].address.address
  nav.set_section('section_idhr_form')
  set_progress(85)
  if filed_other_charges:
    other_charges_text

  stats_info
  users[0].birthdate
  set_progress(95)
  how_learn_about_idhr
  if need_special_assistance:
    language_assistance
  set_progress(100)
  nav.set_section('section_download')
  forms_assembling
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}

  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass

  stuff_to_snapshot['zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
terms: 
  - "protected class": |
      The IDHR can investigate discrimination based on the following protected classes:
      
      * Race
      * National origin
      * Ancestry
      * Skin color
      * Religion
      * Sex (including sexual harassment)
      * Gender identity
      * Sexual orientation
      * Disability
      * Age (40 and over)
      * Marital status
      * Pregnancy
      * Familial status (families with children under 18)
      * Arrest record
      * Order of protection status
      * Military status (including unfavorable discharge)
      * Retaliation (for opposing unlawful discrimination)
      * Source of income
---
id: welcome
question: |
  IDHR Housing discrimination complaint
subquestion: |
  Welcome to Illinois Legal Aid Online's **IDHR Housing discrimination complaint** Easy Form.

  This program helps you make a Housing/Real Estate Transaction Complainant Information Sheet to file with the Illinois Department of Human Rights (IDHR).
  
  To learn more, read ILAO's article about [**housing discrimination**](https://www.illinoislegalaid.org/node/31021).
field: sees_nav_bar
---
id: instructions
continue button field: program_instructions
question: |
  Instructions
subquestion: |
  To use this program you will need: 

  * The name, address, and phone of the person who you believe discriminated against you,
  * Information about the property you were trying to buy or rent, including address and type of property,
  * Information about what happened and why you believe it was discrimination, and
  * Additional contacts for IDHR to reach you. (optional)  

  Set aside 10 to 15 minutes to finish this program. You can log in and save your work to return to later. 
 
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some pages have a question mark in a circle ${ fa_icon("question-circle", color_css="#0dcaf0" ) } that helps explain things.
---
template: help_example
subject: |
  **You can click sections like this to show more information.**
content: |  
  This is an example of help. Click again to hide.
---
id: whats next
continue button field: whats_next
question: |
  Filing a discrimination claim with IDHR
subquestion: |
  You cannot be denied housing if you are a member of a **{protected class}**. You have one year after the date of the discrimination to file your claim with IDHR.
  
  This program will help you figure out if IDHR can investigate. At the end of the program, you can download a form to deliver to IDHR. If IDHR accepts your claim, they will send you a charge form.
  
  Note: If your discrimination claim is not eligible for review by IDHR, there may be a city, county, or federal law that applies. Talk with a lawyer to find out.

  If you would like help finding free or low-cost legal services in your area, use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help).  
  
---
# removed question using framework
#id: accept terms
#question: |
#  Terms of use
#subquestion: |
#  This program does not provide legal advice. It does not take the place of advice from a lawyer.
#
#  Using this program does not create an attorney-client relationship between you and Illinois Legal Aid Online or its employees.
#
#  ${ collapse_template(get_legal_help) }  
#
#fields:
#  - To continue, you must accept the [**terms of use**](https://www.illinoislegalaid.org/about/terms-of-use).: accept
#    datatype: checkboxes
#    none of the above: False
#    minlength: 1
#    choices:
#      - I accept the terms of use.
#    validation messages:
#      minlength: |
#        You cannot continue unless you agree to the terms of use. 
#continue button field: accept_terms
---
template: get_legal_help
subject: |
  **What if I need legal advice?**
content: |  
  If you have questions or concerns about your legal problem and want legal advice you should talk to a lawyer.
  
  Use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help) to find free or low-cost legal services in your area.
---
id: discrimination basis check identity
continue button field: basis_list
question: |
  Protected classes
subquestion: |
  The IDHR can investigate discrimination based on the following protected classes:
  
  * Race
  * National origin
  * Ancestry
  * Skin color
  * Religion
  * Sex (including sexual harassment)
  * Gender identity
  * Sexual orientation
  * Disability
  * Age (40 and over)
  * Marital status
  * Pregnancy
  * Familial status (families with children under 18)
  * Arrest record
  * Order of protection status
  * Military status (including unfavorable discharge)
  * Retaliation (for opposing unlawful discrimination)
  * Source of income
      
  ${ collapse_template(protected_class_identity_help) }  

---
template: protected_class_identity_help
subject: |
  **What if I'm not sure?**
content: |  
  If you don't know whether the discrimination you suffered fits into one of these categories, call IDHR's telephone inquiry line at (312) 814-4320.
  
  * **Ancestry** means your grandparents, great grandparents, and other relatives who came before you (your ancestors).
  * **National origin** means the country or region you or your ancestors came from.
  * **Sexual harassment** means unwanted sexual words, actions, or requests for sexual favors.
  * **Order of protection status** means whether a court has issued an order of protection for or against you.
  * **Retaliation** means that someone harmed you or treated you badly because they were upset that you complained about discrimination, filed a discrimination claim, or testified at a discrimination hearing.
---
id: property location check
question: |
  Is the property in Illinois?
subquestion: |
  To file a complaint with IDHR, the property related to the discrimination against you must be located in Illinois.
field: property_in_il
choices:
  - Yes: True
  - No: False
---
id: property address
question: |
  What is the address of the house, rental unit, or property?
subquestion: |
  To file a complaint with IDHR, the property related to the discrimination against you must be located in Illinois.

  ${ collapse_template(county_help) }  
fields:
  - Street address: subject_property.address
    address autocomplete: True
  - Address line 2: subject_property.unit
    required: False
  - City: subject_property.city
  - State: subject_property.state
    code: |
      states_list()
    default: IL      
  - ZIP code: subject_property.zip
    required: False
  - County: subject_property.county
---
template: county_help
subject: |
  **How do I look up the county?**
content: |  
  We might be able to find the county automatically. Just enter the property address. If it does not appear, you can use this [**City-to-County Finder**](https://www.statsamerica.org/CityCountyFinder/) to find the county.
---
id: not illinois property
event: not_illinois_property
question: |
  Sorry
subquestion: |
  The property must be in Illinois to use this program.
buttons:
  - Exit: exit
  - Restart: restart
---
id: property type
question: |
  What kind of house, rental unit, or property was involved?
subquestion: |
  Check all that apply.
fields:
  - Apartment or condominium building: kind_apartment
    datatype: yesnowide
    help: |
      An **apartment building** is a large building divided into several units, or apartments.
  - Single family home: kind_single_home
    datatype: yesnowide
    help: |
      A **single family home** is usually occupied by just one family and does not share an inside wall with any other house or dwelling.
  - Public or assisted housing: kind_public
    datatype: yesnowide
  - Mobile home park: kind_mobile
    datatype: yesnowide
  - Vacant land: kind_vacant
    datatype: yesnowide
  - Commercial space: kind_commercial
    datatype: yesnowide
  - Other: kind_other
    datatype: yesnowide
  - Other property type: other_property_text
    datatype: text
    show if: 
      variable: kind_other
      is: True

validation code: |
  if not (kind_apartment or kind_single_home or kind_public or kind_mobile or kind_vacant or kind_commercial or kind_other):
    validation_error("You need to select at least one choice.", field="kind_other")
---
id: owner occupied
question: |
  Does the owner live on the property?
field: owner_occupied
choices:
  - Yes: True
  - No: False
  - I don't know: False
---
id: number of units
question: |
  How many units are on the property?
subquestion: |
  If you do not know, you can leave this blank.
fields:
  - Number of units: number_units
    datatype: integer
    required: False
---
id: property still available
question: |
  Is the property still available?
field: property_still_available
choices:
  - Yes: yes
  - No: no
  - I don't know: idk
---
id: discrimination type
question: |
  What happened to you?
subquestion: |
  Check all that apply. You can explain how you were discriminated against on another screen.
    
  Finish this sentence: "I was ..."
fields: 
  - Refused an opportunity to rent or buy housing or told housing was not available when it was.: discrim_housing_opp
    datatype: yesnowide
  - Refused a request to accommodate policies or practices or modify housing because of a disability.: discrim_accommodation
    datatype: yesnowide
  - Discriminated against in the terms or conditions of sale, rental occupancy, or in services or facilities.: discrim_terms
    datatype: yesnowide
  - Discriminated against in financing or denied a mortgage loan.: discrim_financing
    datatype: yesnowide
  - Discriminated against in the appraisal process.: discrim_appraisal
    datatype: yesnowide
  - Discriminated against in broker's services.: discrim_broker
    datatype: yesnowide
  - Treated differently than others seeking housing.: discrim_treated_different
    datatype: yesnowide
  - Intimidated or interfered or coerced in the exercise of my housing rights.: discrim_exercise
    datatype: yesnowide
  - Discriminated against in another way.: discrim_other_way
    datatype: yesnowide
  - Short description of what happened: discrim_other_text
    help: |
      Give a short description of what you tried to do. For example, "I was denied a chance to rent an apartment," or "I was turned away when I applied for housing assistance."
    maxlength: 150
    show if: 
      variable: discrim_other_way
      is: True
---
id: discrimination description
question: |
  How were you discriminated against?
subquestion: |
  Explain the event that happened that caused you to feel that you were being discriminated against. 
  
  You only need to describe the event, not the reasons why you think you were discriminated against. You will be able to describe the reasons in a few screens.

  ${ collapse_template(description_help) }  

fields:
  - label: What happened
    field: discrim_description
    datatype: area
    rows: 10
    maxlength: 1500
---
template: description_help
subject: |
  **What should my answer look like?**
content: |  
  For example, "There was a line of people asking about housing assistance. The White people were given a packet. The Black and Latinx people were told to come back next week."
---
id: discrimination dates
question: |
  When did the discrimination occur?
subquestion: |
  You must file your complaint with the IDHR within 1 year of when the latest act of discrimination occurred. It is best to file as soon as possible.
fields:
  - Date of last act of discrimination: discrim_date
    datatype: date
    max: ${ today().format("yyyy-MM-dd") }
  - Is the discrimination ongoing?: discrim_ongoing
    datatype: yesnoradio
---
id: not within one year
event: not_in_time
question: |
  Sorry
subquestion: |
  You must file your complaint with the IDHR within 1 year of when the latest act of discrimination occurred.
  
  You can talk with a lawyer to find out what other options you have. If you would like help finding free or low-cost legal services in your area, use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help).

buttons:
  - Exit: exit
  - Restart: restart
---
id: less than two weeks to file
continue button field: file_soon_warning
question: |
  Almost out of time
subquestion: |
  You only have 365 days from the date of the last act of discrimination to file your claim. You are within 2 weeks of this time limit.

  Be sure to submit your Complaint to IDHR as soon as possible.
---
id: discrimination basis
question: |
  Why do you believe you were discriminated against?
subquestion: |
  Explain the reasons why your housing rights were denied because you are in a **{protected class}**.
  
  ${ collapse_template(discrim_basis_example_help) }  

fields:
  - label: Reasons for discrimination
    field: discrim_basis
    datatype: area
    rows: 10
    maxlength: 1000
---
template: discrim_basis_example_help
subject: |
  **How should I answer this question?**
content: |  
  Your answer could be a response to one of these questions:

  * Were you denied housing because of your race?
  * Were you denied a mortgage loan because of your religion?
  * Were you denied a lease for an apartment because you have children?
  * Were you harassed because you helped someone get fair housing?
  
  Be sure to mention your protected class.
---
sets:
  - other_parties[i].name.first
id: other party name
question: |
  Who do you believe discriminated against you?
subquestion: |
  ${ collapse_template(long_name_help) }
fields:
  - code: |
      other_parties[i].name_fields(person_or_business='unsure')
---
template: long_name_help
subject: |
  **What if I need more space?**
content: |
  If they have a long name like "Jane Smith, Director of Housing," select **Business or organization**. You can then enter the full name and title.
---
id: other party description
question: |
  How would you describe ${ other_parties[0].name_full() }?
subquestion: |
  Check all that apply.
fields:
  - Landlord: other_party_landlord
    datatype: yesnowide
  - Owner: other_party_owner
    datatype: yesnowide
  - Bank or other lender: other_party_lender
    datatype: yesnowide
  - Real estate agent or broker: other_party_agent
    datatype: yesnowide
  - Appraiser: other_party_appraiser
    datatype: yesnowide
  - Other: other_party_other
    datatype: yesnowide
  - Other description: other_party_description
    datatype: text
    maxlength: 30
    show if: 
      variable: other_party_other
      is: True

validation code: |
  if not (other_party_landlord or other_party_owner or other_party_lender or other_party_agent or other_party_appraiser or other_party_other):
    validation_error("You need to select at least one choice.", field="kind_other")
---
id: other party address
question: |
  What is ${ other_parties[0].name_full() }'s address?
subquestion: |
  A business address is preferred, but you can enter whatever address you have.
fields:
  - Street address: other_parties[0].address.address
    address autocomplete: True
  - Address line 2: other_parties[0].address.unit
    required: False
  - City: other_parties[0].address.city
  - State: other_parties[0].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: other_parties[0].address.zip
    required: False
---
id: other party phone number
question: |
  What is ${ other_parties[0].name_full() }'s phone number?
subquestion: |
  If you do not know, you can leave this blank.
fields:
  - Phone: other_parties[0].phone_number
    datatype: al_international_phone
    required: False

---
id: user address
question: |
  What is your address?
subquestion: |
  If you are enrolled in the Illinois Attorney General Address Confidentiality Program (ACP), you may use your ACP substitute address for all communication with IDHR.

  ${ collapse_template(county_help) }  
fields:
  - Street address: users[0].address.address
    address autocomplete: True
  - Address line 2: users[0].address.unit
    required: False
    maxlength: 10
  - City: users[0].address.city
  - State: users[0].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: users[0].address.zip
    required: False
  - County: users[0].address.county
---
id: email address
question: |
  Email information
subquestion: |
  If you do not have email, you can leave these blank.
fields:
  - What is your email address?: users[0].email    
    datatype: email
    required: False
  - Do you want to receive notices from IDHR by email? (optional): email_notice_consent
    datatype: yesnoradio
    required: False
validation code: |
  if email_notice_consent == True and users[0].email == "":
    validation_error("You need to enter an email address if you want to receive email from IDHR.", field="users[0].email")
---
id: phone number
question: |
  What is your phone number?
fields:
  - Phone: users[0].phone_number
    datatype: al_international_phone
    required: False
---
id: any alt contacts
question: |
  Do you want to add additional contacts?
subquestion: |
  IDHR will try to contact up to 2 other people if they can't reach you.
  
  You will need to enter their phone number. You can also enter their address if you know it.
field: has_alt_contact
choices:
  - Yes: True
  - No: False
---
sets:
  - alt_contacts[i].name.first
id: alt contacts names
question: |
  What is the name of the ${ ordinal(i) } contact?
fields:
  - code: |
      alt_contacts[i].name_fields()
---
id: know alt contact address
sets:
  - knows_alt_address[i]
question: |
  Do you know ${ alt_contacts[i].name_full() }'s address?
field: knows_alt_address[i]
choices:
  - Yes: True
  - No: False
---
id: alt contacts address
sets:
  - alt_contacts[i].address.address
  - alt_contacts[i].address.city
  - alt_contacts[i].address.zip
question: |
  What is ${ alt_contacts[i].name_full() }'s address?
fields:
  - Street address: alt_contacts[i].address.address
    address autocomplete: True
  - Address line 2: alt_contacts[i].address.unit
    required: False
  - City: alt_contacts[i].address.city
  - State: alt_contacts[i].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: alt_contacts[i].address.zip
---
id: alt contacts phone number
sets:
  - alt_contacts[i].phone_number
question: |
  What is ${ alt_contacts[i].name_full() }'s phone number?
fields:
  - Phone: alt_contacts[i].phone_number
    datatype: al_international_phone
---
id: second alt contact
question: |
  Do you want to add another contact?
subquestion: |
  So far, you listed ${ alt_contacts[0].name_full() }.
field: has_second_alt_contact
choices:
  - Yes: True
  - No: False
---
id: filed other charges
question: |
  Have you filed a charge of discrimination with any other agency?
field: filed_other_charges
choices:
  - Yes: True
  - No: False
---
id: other charge description
question: |
  Other charge information
subquestion: |
   Explain the other charge of discrimination. Be sure to include the name of the agency. List the case or charge number, and the date you filed, if you know them.
fields:
  - label: Other charges filed
    field: other_charges_text
    datatype: area
    rows: 2
---
id: statistical info intro
continue button field: stats_info
question: |
  A few more questions
subquestion: |
  IDHR asks for additional information for statistical purposes.
---
id: stats gender and national origin
question:
  Personal information
subquestion: |
  This is optional.
fields:
  - Date of birth: users[0].birthdate
    datatype: BirthDate
    required: False
  - Gender: users[0].gender
    required: False
  - National origin: users[0].national_origin
    required: False
    help: |
      **National origin** means the country or region you or your ancestors came from.
---
id: how learned about idhr
question: |
  How did you learn about IDHR?
subquestion: |
  ${ collapse_template(hear_about_idhr_help) }
fields:
  - label: Learned about IDHR from
    field: how_learn_about_idhr
    datatype: area
    rows: 2
    required: False
---
template: hear_about_idhr_help
subject: |
  **Can I see some examples?**
content: |
  You might have heard about IDHR from:
  
    * A friend,
    * A family member,
    * A co-worker,
    * An organization,
    * Illinois Legal Aid Online (ILAO),
    * An internet search, or
    * The court clerk.
---
id: need special assistnace
question: |
  Do you need help from IDHR to communicate with you?
subquestion: |
  IDHR can provide:
  
    * Non-English language assistance
    * Sign language interpreter
    * Disability assistance
    * Other special assistance
fields:
  Special assistance from IDHR?: need_special_assistance
  datatype: yesnoradio
---
id: special assistance details
question: |
  What assistance would you like from IDHR?
subquestion: |
  Check all that apply.
fields:
  - Non-English language or sign language interpreter: language_assistance
    datatype: yesnowide
  - Language: language_description
    maxlength: 45
    show if: language_assistance
  - Disability assistance: disability_assistance
    datatype: yesnowide
  - Disability: disability_description
    maxlength: 70
    show if: disability_assistance
  - Other: assistance_other
    datatype: yesnowide
  - Other communication help: assistance_other_description
    maxlength: 90
    show if: assistance_other
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  
  Your forms are ready. View and download your forms below. Click **Make changes** to fix any mistakes.

  After you print your Housing discrimination complaint, you will have to sign and date it. Make a copy for your records before you deliver it to IDHR.
  
  Be sure to read the instructions and important information on page 3 of your form. Find answers to Frequently Asked questions on the [**IDHR website**](https://dhr.illinois.gov/filing-a-charge/faq-home.html).

  This program does not deliver your forms to IDHR.

  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }
  
  ${ al_user_bundle.download_list_html() }

  &nbsp;

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  **Note:** This program does not deliver your forms to IDHR.
  
  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} Sign-in](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif 

  &nbsp;
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=current_context().question_id, easy_form_variable=current_context().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  IDHR Housing discrimination complaint
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)
---
objects:
  - housing_cis: ALDocument.using(title="Housing discrimination complaint", filename="complaint.pdf", has_addendum=False)
  - housing_cis_addendum: ALDocument.using(title="Housing discrimination complaint addendum", filename="addendum.pdf", has_addendum=False)
  - instructions: ALDocument.using(title="Instructions", filename="instructions.pdf", has_addendum=False)
---
code: |
  instructions.enabled = False
  housing_cis.enabled = False
  housing_cis_addendum.enabled = False

  if len(discrim_description) > 400 or len(discrim_basis) > 300:
    instructions.enabled = True
    housing_cis.enabled = True
    housing_cis_addendum.enabled = True
  else:
    instructions.enabled = True
    housing_cis.enabled = True
  
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions, housing_cis_bundle], filename="housing complaint.pdf", title="All forms")
  - al_court_bundle: ALDocumentBundle.using(elements=[housing_cis_bundle], filename="housing complaint.pdf", title="Housing discrimination complaint")
---
objects:
  - housing_cis_bundle: ALDocumentBundle.using(elements=[housing_cis, housing_cis_addendum], filename="housing complaint.pdf", title="Housing discrimination complaint", enabled=True)
---
attachment:
  variable name: instructions[i]
  name: instructions
  filename: instructions
  skip undefined: True
  editable: False
  pdf template file: idhr_housing_ilao_instructions.pdf
  fields:
      - "fake": ${ "" }
---
attachment:
  variable name: housing_cis[i]
  name: complaint
  filename: complaint
  skip undefined: True
  editable: False
  pdf template file: idhr_housing_complaint.pdf
  fields:
  
      - "alt_contact_1_full_address": ${ alt_contacts[0].address.on_one_line(bare=True) if (has_alt_contact and knows_alt_address[0]) else '' }
      - "alt_contact_1_name": ${ alt_contacts[0].name_full() if has_alt_contact else '' }
      - "alt_contact_1_phone": ${ phone_number_formatted(alt_contacts[0].phone_number) if has_alt_contact else '' }
      - "alt_contact_2_full_address": ${ alt_contacts[1].address.on_one_line(bare=True) if (has_second_alt_contact and knows_alt_address[1]) else '' }
      - "alt_contact_2_name": ${ alt_contacts[1].name_full() if has_second_alt_contact else '' }
      - "alt_contact_2_phone": ${ phone_number_formatted(alt_contacts[1].phone_number) if has_second_alt_contact else ''}
      - "discrim_basis": ${ discrim_basis if len(discrim_basis) <= 300 else 'See attached addendum.'}
      - "discrim_broker_services_cb": ${ discrim_broker }
      - "discrim_date_latest": ${ discrim_date.format("MM-dd-yyyy") }
      - "discrim_appraisal_cb": ${ discrim_appraisal }
      - "discrim_description": ${ discrim_description if len(discrim_description) <= 400 else 'See attached addendum.' }
      - "discrim_exercise_cb": ${ discrim_exercise }
      - "discrim_financing_cb": ${ discrim_financing }
      - "discrim_ongoing_no": ${ discrim_ongoing == False }
      - "discrim_ongoing_yes": ${ discrim_ongoing }
      - "discrim_other": ${ discrim_other_text if discrim_other_way else '' }
      - "discrim_refused_accommodation_cb": ${ discrim_accommodation }
      - "discrim_refused_housing_opp_cb": ${ discrim_housing_opp }
      - "discrim_terms_cb": ${ discrim_terms }
      - "discrim_treated_different_cb": ${ discrim_treated_different }
      - "email_notice_consent_cb": ${ email_notice_consent }
      - "housing_number_units": ${ number_units if kind_apartment else "" }
      - "housing_type_apt_cb": ${ kind_apartment }
      - "housing_type_commercial_cb": ${ kind_commercial }
      - "housing_type_mobile_home_cb": ${ kind_mobile }
      - "housing_type_other_cb": ${ kind_other }
      - "housing_type_other_description": ${ other_property_text }
      - "housing_type_owner_lives_there_cb": ${ owner_occupied }
      - "housing_type_public_cb": ${ kind_public }
      - "housing_type_single_cb": ${ kind_single_home }
      - "housing_type_vacant_cb": ${ kind_vacant }
      - "how_learn_about_office": ${ how_learn_about_idhr }
      - "other_charges_text": ${ other_charges_text if filed_other_charges else '' }
      - "other_party_address_full_one_line": ${ other_parties[0].address.on_one_line(bare=True) }
      - "other_party_agent_cb": ${ other_party_agent }
      - "other_party_appraiser_cb": ${ other_party_appraiser }
      - "other_party_description": ${ other_party_description }
      - "other_party_landlord_cb": ${ other_party_landlord }
      - "other_party_lender_cb": ${ other_party_lender }
      - "other_party_name": ${ other_parties[0].name_full() }
      - "other_party_other_cb": ${ other_party_other }
      - "other_party_owner_cb": ${ other_party_owner }
      - "other_party_phone": ${ phone_number_formatted(other_parties[0].phone_number) }
      - "property_address_county": ${ subject_property.county.lower().replace(' county', '').capitalize() }
      - "property_address_line_2": ${ subject_property.line_two() }
      - "property_address_street": ${ subject_property.address }
      - "property_address_unit": ${ subject_property.formatted_unit(bare=True) }
      - "property_still_available_idk": ${ property_still_available == 'idk' }
      - "property_still_available_no": ${ property_still_available == 'no' }
      - "property_still_available_yes": ${ property_still_available == 'yes' }
      - "stats_user_sex": ${ users[0].gender }
      - "stats_user_dob": ${ users[0].birthdate }
      - "stats_user_national_origin": ${ users[0].national_origin }
      - "language_cb": ${ language_assistance if need_special_assistance else "" }
      - "language_description": ${ language_description if need_special_assistance and language_assistance else "" }
      - "disability_cb": ${ disability_assistance if need_special_assistance else "" }
      - "disability_description": ${ disability_description if need_special_assistance and disability_assistance else "" }
      - "assistance_other_cb": ${ assistance_other if need_special_assistance else "" }
      - "assistance_other_description": ${ assistance_other_description if need_special_assistance and assistance_other else "" }
      - "user__1": ${ users[0].name_full() }
      - "user__2": ${ users[0].name_full() }
      - "user_email": ${ users[0].email }
      - "user_mail_address_county": ${ users[0].address.county.lower().replace(' county', '').capitalize() }
      - "user_mail_address_line_1": ${ users[0].address.address }
      - "user_mail_address_line_2": ${ users[0].address.line_two() }
      - "user_phone_number": ${ phone_number_formatted(users[0].phone_number) }
      - "user_unit_short": ${ users[0].address.unit }
---
attachment:
  variable name: housing_cis_addendum[i]
  name: addendum
  filename: addendum
  skip undefined: True
  editable: False
  pdf template file: idhr_addendum.pdf
  fields:
      - "user_name": ${ users[0].name_full() }
      - "discrim_basis": ${ discrim_basis if len(discrim_basis) > 300 else '' }
      - "discrim_description": ${ discrim_description if len(discrim_description) > 400 else '' }

---
############### Review page
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - Edit: subject_property.address
    button: |
      **Property address:**
      ${ subject_property.on_one_line(bare=True) }
  - Edit: subject_property.address
    button: |
      **Property County:**
      ${ subject_property.county.lower().replace(' county', '').capitalize() }
  - Edit: kind_apartment
    button: |
      **Property type:**
      
      % if kind_apartment == True:
        * Apartment or condominium building
      % endif
      % if kind_single_home == True:
        * Single family home
      % endif
      % if kind_public == True:
        * Public or assisted housing
      % endif
      % if kind_mobile == True:
        * Mobile home park
      % endif
      % if kind_vacant == True:
        * Vacant land
      % endif
      % if kind_commercial == True:
        * Commercial space
      % endif
      % if kind_other == True:
        * Other
      % endif
  - Edit: other_property_text
    button: |
      **Other property type:**
      ${ other_property_text }
    show if: kind_other
  - Edit: owner_occupied
    button: |
      **Owner lives in the property?**
      ${ word(yesno(owner_occupied)) }      
  - Edit: number_units
    button: |
      **Number of units in the property: **
      ${ number_units }
    show if: kind_apartment
  - Edit: property_still_available
    button: |
      **Is the property still available?**
      % if property_still_available is "yes":
      Yes
      % elif property_still_available is "no":
      No
      % else:
      I don't know
      % endif      
  - Edit: discrim_housing_opp
    button: |
      **What happened?** I was...
      
      % if discrim_housing_opp == True:
        * Refused an opportunity to rent or buy housing or told housing was not available when it was.
      % endif
      % if discrim_accommodation == True:
        * Refused a request to accommodate policies or practices or modify housing because of a disability.
      % endif
      % if discrim_terms == True:
        * Discriminated against in the terms or conditions of sale, rental occupancy, or in services or facilities.
      % endif
      % if discrim_financing == True:
        * Discriminated against in financing or denied a mortgage loan.
      % endif
      % if discrim_appraisal == True:
        * Discriminated against in the appraisal process.
      % endif
      % if discrim_broker == True:
        * Discriminated against in broker's services.
      % endif
      % if discrim_treated_different == True:
        * Treated differently than others seeking housing.
      % endif
      % if discrim_exercise == True:
        * Intimidated or interfered or coerced in the exercise of my housing rights.
      % endif
      % if discrim_other_way == True:
        * Discriminated against in another way.
      % endif
  - Edit: discrim_other_text
    button: |
      **Other discrimination:**
      ${ discrim_other_text }
    show if: discrim_other_way
  - Edit: discrim_description
    button: |
      **How were you discriminated against?**
      ${ discrim_description }
  - Edit: discrim_date
    button: |
      **Last act of discrimination on:**
      ${ discrim_date }
  - Edit: discrim_ongoing
    button: |
      **Discrimination ongoing?**
      ${ word(yesno(discrim_ongoing)) }
  - Edit: discrim_basis
    button: |
      **Why were you discriminated against?**
      ${ discrim_basis }
  - Edit: other_parties[0].name.first
    button: |
      **Who discriminated against you?**
      ${ other_parties[0].name_full() }  
  - Edit: other_party_landlord
    button: |
      **Description of ${ other_parties[0].name_full() }:**
      
      % if other_party_landlord == True:
        * Landlord
      % endif
      % if other_party_owner == True:
        * Owner
      % endif
      % if other_party_lender == True:
        * Bank or other lender
      % endif
      % if other_party_agent == True:
        * Real estate agent or broker
      % endif
      % if other_party_appraiser == True:
        * Appraiser
      % endif
      % if other_party_other == True:
        * Other description
      % endif
  - Edit: other_party_description
    button: |
      **Other description:**
      ${ other_party_description }
    show if: other_party_other
  - Edit: other_parties[0].address
    button: |
      **${ other_parties[0].name_full() }'s address:**
      ${ other_parties[0].address.on_one_line(bare=True) }
  - Edit: other_parties[0].phone_number
    button: |
      **${ other_parties[0].name_full() }'s phone number:**
      ${ phone_number_formatted(other_parties[0].phone_number) }
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${ users[0].name_full() }  
  - Edit: users[0].address.address
    button: |
      **Your address:**
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].address
    button: |
      **Your County:**
      ${ users[0].address.county.lower().replace(' county', '').capitalize() }
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      ${ phone_number_formatted(users[0].phone_number) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
  - Edit: email_notice_consent
    button: |
      **Consent to email from IDHR?**
      ${ word(yesno(email_notice_consent)) }
  - Edit: users[0].birthdate
    button: |
      **Your date of birth (optional):**
      ${ users[0].birthdate }
    show if: 1==1
  - Edit: users[0].gender
    button: |
      **Your gender (optional):**
      ${ users[0].gender }
    show if: 1==1
  - Edit: users[0].national_origin
    button: |
      **Your national origin (optional):**
      ${ users[0].national_origin }
    show if: 1==1
  - Edit: has_alt_contact
    button: |
      **Add additional contact?**
      ${ word(yesno(has_alt_contact)) }
  - Edit: alt_contacts[0].name.first
    button: |
      **Contact's name:**
      ${ alt_contacts[0].name_full() }  
    show if: has_alt_contact
  - Edit: alt_contacts[0].phone_number
    button: |
      **${ alt_contacts[0].name_full() }'s phone number:**
      ${ phone_number_formatted(alt_contacts[0].phone_number) }
    show if: has_alt_contact
  - Edit: knows_alt_address[0]
    button: |
      **Know ${ alt_contacts[0].name_full() }'s address?**
      ${ word(yesno(knows_alt_address[0])) }
    show if: has_alt_contact
  - Edit: alt_contacts[0].address.address
    button: |
      **${ alt_contacts[0].name_full() }'s address:**
      ${ alt_contacts[0].address.on_one_line(bare=True) }
    show if: has_alt_contact and knows_alt_address[0]
  - Edit: has_second_alt_contact
    button: |
      **Add a second contact?**
      ${ word(yesno(has_second_alt_contact)) }
  - Edit: alt_contacts[1].name.first
    button: |
      **Second contact's name:**
      ${ alt_contacts[1].name_full() }  
    show if: has_second_alt_contact
  - Edit: alt_contacts[1].phone_number
    button: |
      **${ alt_contacts[1].name_full() }'s phone number:**
      ${ phone_number_formatted(alt_contacts[1].phone_number) }
    show if: has_second_alt_contact
  - Edit: knows_alt_address[1]
    button: |
      **Know ${ alt_contacts[1].name_full() }'s address?**
      ${ word(yesno(knows_alt_address[1])) }
    show if: has_second_alt_contact
  - Edit: alt_contacts[1].address.address
    button: |
      **${ alt_contacts[1].name_full() }'s address:**
      ${ alt_contacts[1].address.on_one_line(bare=True) }
    show if: has_second_alt_contact and knows_alt_address[1]
  - Edit: filed_other_charges
    button: |
      **Have you filed a charge of discrimination with another agency?**
      ${ word(yesno(filed_other_charges)) }
  - Edit: other_charges_text
    button: |
      **Description of the other charge:**
      ${ other_charges_text }  
    show if: filed_other_charges
  - Edit: how_learn_about_idhr
    button: |
      **How did you learn about IDHR (optional)?**
      ${ how_learn_about_idhr }
    show if: 1==1
  - Edit: need_special_assistance
    button: |
      **Do you need communication help from IDHR?**
      ${ word(yesno(need_special_assistance)) }
  - Edit: language_assistance
    button: |
      **Do you need language assistance?**
      ${ word(yesno(language_assistance)) }
    show if: need_special_assistance
  - Edit: language_description
    button: |
      **Language:**
      ${ language_description }
    show if: need_special_assistance and language_assistance
  - Edit: disability_assistance
    button: |
      **Do you need disability assistance?**
      ${ word(yesno(disability_assistance)) }
    show if: need_special_assistance
  - Edit: disability_description
    button: |
      **Disability:**
      ${ disability_description }
    show if: need_special_assistance and disability_assistance
  - Edit: assistance_other
    button: |
      **Do you need other communication assistance?**
      ${ word(yesno(assistance_other)) }
    show if: need_special_assistance
  - Edit: assistance_other_description
    button: |
      **Other communication help requested:**
      ${ assistance_other_description }
    show if: need_special_assistance and assistance_other

---
id: property details review screen
event: section_property_details
section: Property details
question: |
  Property details
subquestion: |
  Edit your answers below.
review:
  - Edit: subject_property.address
    button: |
      **Property address:**
      ${ subject_property.on_one_line(bare=True) }
  - Edit: subject_property.address
    button: |
      **Property County:**
      ${ subject_property.county.lower().replace(' county', '').capitalize() }
  - Edit: kind_apartment
    button: |
      **Property type:**
      
      % if kind_apartment == True:
        * Apartment or condominium building
      % endif
      % if kind_single_home == True:
        * Single family home
      % endif
      % if kind_public == True:
        * Public or assisted housing
      % endif
      % if kind_mobile == True:
        * Mobile home park
      % endif
      % if kind_vacant == True:
        * Vacant land
      % endif
      % if kind_commercial == True:
        * Commercial space
      % endif
      % if kind_other == True:
        * Other
      % endif
  - Edit: other_property_text
    button: |
      **Other property type:**
      ${ other_property_text }
    show if: kind_other
  - Edit: owner_occupied
    button: |
      **Owner lives in the property?**
      ${ word(yesno(owner_occupied)) }      
  - Edit: number_units
    button: |
      **Number of units in the property: **
      ${ number_units }
    show if: kind_apartment
  - Edit: property_still_available
    button: |
      **Is the property still available?**
      % if property_still_available is "yes":
      Yes
      % elif property_still_available is "no":
      No
      % else:
      I don't know
      % endif      

---
id: discrimination info review screen
event: section_discrimination_info
section: Discrimination info
question: |
  Discrimination info
subquestion: |
  Edit your answers below.
review:
  - Edit: discrim_housing_opp
    button: |
      **What happened?** I was...
      
      % if discrim_housing_opp == True:
        * Refused an opportunity to rent or buy housing or told housing was not available when it was.
      % endif
      % if discrim_accommodation == True:
        * Refused a request to accommodate policies or practices or modify housing because of a disability.
      % endif
      % if discrim_terms == True:
        * Discriminated against in the terms or conditions of sale, rental occupancy, or in services or facilities.
      % endif
      % if discrim_financing == True:
        * Discriminated against in financing or denied a mortgage loan.
      % endif
      % if discrim_appraisal == True:
        * Discriminated against in the appraisal process.
      % endif
      % if discrim_broker == True:
        * Discriminated against in broker's services.
      % endif
      % if discrim_treated_different == True:
        * Treated differently than others seeking housing.
      % endif
      % if discrim_exercise == True:
        * Intimidated or interfered or coerced in the exercise of my housing rights.
      % endif
      % if discrim_other_way == True:
        * Discriminated against in another way.
      % endif
  - Edit: discrim_other_text
    button: |
      **Other discrimination:**
      ${ discrim_other_text }
    show if: discrim_other_way
  - Edit: discrim_description
    button: |
      **How were you discriminated against?**
      ${ discrim_description }
  - Edit: discrim_date
    button: |
      **Last act of discrimination on:**
      ${ discrim_date }
  - Edit: discrim_ongoing
    button: |
      **Discrimination ongoing?**
      ${ word(yesno(discrim_ongoing)) }
  - Edit: discrim_basis
    button: |
      **Why were you discriminated against?**
      ${ discrim_basis }
  - Edit: other_parties[0].name.first
    button: |
      **Who discriminated against you?**
      ${ other_parties[0].name_full() }  
  - Edit: other_party_landlord
    button: |
      **Description of ${ other_parties[0].name_full() }:**
      
      % if other_party_landlord == True:
        * Landlord
      % endif
      % if other_party_owner == True:
        * Owner
      % endif
      % if other_party_lender == True:
        * Bank or other lender
      % endif
      % if other_party_agent == True:
        * Real estate agent or broker
      % endif
      % if other_party_appraiser == True:
        * Appraiser
      % endif
      % if other_party_other == True:
        * Other description
      % endif
  - Edit: other_party_description
    button: |
      **Other description:**
      ${ other_party_description }
    show if: other_party_other
  - Edit: other_parties[0].address
    button: |
      **${ other_parties[0].name_full() }'s address:**
      ${ other_parties[0].address.on_one_line(bare=True) }
  - Edit: other_parties[0].phone_number
    button: |
      **${ other_parties[0].name_full() }'s phone number:**
      ${ phone_number_formatted(other_parties[0].phone_number) }


---
id: about you review screen
event: section_about_you
section: About you
question: |
  About you and other contacts
subquestion: |
  Edit your answers below.
review:
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${ users[0].name_full() }  
  - Edit: users[0].address.address
    button: |
      **Your address:**
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].address
    button: |
      **Your County:**
      ${ users[0].address.county.lower().replace(' county', '').capitalize() }
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      ${ phone_number_formatted(users[0].phone_number) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
  - Edit: email_notice_consent
    button: |
      **Consent to email from IDHR?**
      ${ word(yesno(email_notice_consent)) }
  - Edit: users[0].birthdate
    button: |
      **Your date of birth (optional):**
      ${ users[0].birthdate }
    show if: 1==1
  - Edit: users[0].gender
    button: |
      **Your gender (optional):**
      ${ users[0].gender }
    show if: 1==1
  - Edit: users[0].national_origin
    button: |
      **Your national origin (optional):**
      ${ users[0].national_origin }
    show if: 1==1
  - Edit: has_alt_contact
    button: |
      **Add additional contact?**
      ${ word(yesno(has_alt_contact)) }
  - Edit: alt_contacts[0].name.first
    button: |
      **Contact's name:**
      ${ alt_contacts[0].name_full() }  
    show if: has_alt_contact
  - Edit: alt_contacts[0].phone_number
    button: |
      **${ alt_contacts[0].name_full() }'s phone number:**
      ${ phone_number_formatted(alt_contacts[0].phone_number) }
    show if: has_alt_contact
  - Edit: knows_alt_address[0]
    button: |
      **Know ${ alt_contacts[0].name_full() }'s address?**
      ${ word(yesno(knows_alt_address[0])) }
    show if: has_alt_contact
  - Edit: alt_contacts[0].address.address
    button: |
      **${ alt_contacts[0].name_full() }'s address:**
      ${ alt_contacts[0].address.on_one_line(bare=True) }
    show if: has_alt_contact and knows_alt_address[0]
  - Edit: has_second_alt_contact
    button: |
      **Add a second contact?**
      ${ word(yesno(has_second_alt_contact)) }
  - Edit: alt_contacts[1].name.first
    button: |
      **Second contact's name:**
      ${ alt_contacts[1].name_full() }  
    show if: has_second_alt_contact
  - Edit: alt_contacts[1].phone_number
    button: |
      **${ alt_contacts[1].name_full() }'s phone number:**
      ${ phone_number_formatted(alt_contacts[1].phone_number) }
    show if: has_second_alt_contact
  - Edit: knows_alt_address[1]
    button: |
      **Know ${ alt_contacts[1].name_full() }'s address?**
      ${ word(yesno(knows_alt_address[1])) }
    show if: has_second_alt_contact
  - Edit: alt_contacts[1].address.address
    button: |
      **${ alt_contacts[1].name_full() }'s address:**
      ${ alt_contacts[1].address.on_one_line(bare=True) }
    show if: has_second_alt_contact and knows_alt_address[1]

---
id: idhr form review screen
event: section_idhr_form
section: IDHR form info
question: |
  IDHR form info
subquestion: |
  Edit your answers below.
review:
  - Edit: filed_other_charges
    button: |
      **Have you filed a charge of discrimination with another agency?**
      ${ word(yesno(filed_other_charges)) }
  - Edit: other_charges_text
    button: |
      **Description of the other charge:**
      ${ other_charges_text }  
    show if: filed_other_charges
  - Edit: how_learn_about_idhr
    button: |
      **How did you learn about IDHR (optional)?**
      ${ how_learn_about_idhr }
    show if: 1==1
  - Edit: need_special_assistance
    button: |
      **Do you need communication help from IDHR?**
      ${ word(yesno(need_special_assistance)) }
  - Edit: language_assistance
    button: |
      **Do you need language assistance?**
      ${ word(yesno(language_assistance)) }
    show if: need_special_assistance
  - Edit: language_description
    button: |
      **Language:**
      ${ language_description }
    show if: need_special_assistance and language_assistance
  - Edit: disability_assistance
    button: |
      **Do you need disability assistance?**
      ${ word(yesno(disability_assistance)) }
    show if: need_special_assistance
  - Edit: disability_description
    button: |
      **Disability:**
      ${ disability_description }
    show if: need_special_assistance and disability_assistance
  - Edit: assistance_other
    button: |
      **Do you need other communication assistance?**
      ${ word(yesno(assistance_other)) }
    show if: need_special_assistance
  - Edit: assistance_other_description
    button: |
      **Other communication help requested:**
      ${ assistance_other_description }
    show if: need_special_assistance and assistance_other
